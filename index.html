<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Chapter 1-DAILY LIFE</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>
  <style>

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f5f5f5;
      color: black;
      text-align: center;
      padding: 2em;
    }
    .hidden { display: none; }

#user-display {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 9999;
  display: flex;
  align-items: center;
  background-color: #F5F5F5;
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  font-family: monospace;
  color: #3F40D3;
  border: 1px solid #ddd;
  min-width: 180px;
}

#persistent-nav {
  position: fixed;
  top: 110px;
  left: 10px;
  z-index: 9999;
  display: none;
  flex-direction: column;
  gap: 4px; /* 버튼 사이 간격 줄임 */
  background-color: #F5F5F5;
  padding: 6px 8px; /* 네모 자체 여백 줄임 */
  border-radius: 6px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  border: 1px solid #ddd;
  min-width: 140px; /* 폭도 작게 */
}

#persistent-nav button {
  background-color: #3F40D3;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 4px 6px;     /* 버튼 내부 여백 줄임 */
  margin: 0;            /* 버튼 외부 여백 제거 */
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;      /* 글자 크기 줄임 */
  transition: background-color 0.2s ease;
}

#persistent-nav button:hover {
  background-color: #2c2db2;
}

#barcode-icon {
  width: 60px;
  height: 40px;
  margin-right: 10px;
}

#user-text > div {
  font-size: 14px;
  line-height: 1.4;
  color: #3F40D3;  /* 혹시 상속이 안 될 수도 있으니 명시 */
}
    #bgm-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #bgm-player button {
      background-color: #3f40d3 !important;
      color: white;
    }

    .fade-in {
      animation: fadein 1.2s ease-in;
            }
  
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .typewriter {
      font-weight: bold;
      font-size: 1.1em;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #3f40d3;
      width: 0;
      animation: typing 3s steps(30, end) forwards, blink 0.75s step-end infinite;
      margin-bottom: 1em;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    @keyframes pop {
    0% { transform: scale(0.7); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
  }

  #drink-result {
    animation: pop 0.6s ease-out;
    transition: all 0.2s ease;
  }
  
    button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background-color: #3f40d3;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2c2db2;
    }
    .nav-button {
      background-color: #444 !important;
      font-size: 0.85em !important;
      padding: 5px 12px !important;
    }
    .logo {
      width: 200px;
      margin-bottom: 1em;
    }
  </style>
</head>

<!-- !!!!여기서부터 BODY!!!! -->
<body>
  <!-- 유저 디스플레이 -->
<div id="user-display">
  <img src="zzapbarcode.png" alt="barcode" id="barcode-icon">
  <div id="user-text">
    <p id="user-class-line">User ID : UNKNOWN</p>
    <p id="coin-line">Coin : ???</p>
  </div>
</div>
  <!-- 브금 플레이어 -->
  <div id="bgm-player">
    <audio id="bgm" src="zzapbgm.mp3" loop></audio>
    <button onclick="document.getElementById('bgm').play()">▶</button>
    <button onclick="document.getElementById('bgm').pause()">⏸</button>
  </div>
  
  <!-- 로고 -->
  <img class="logo" src="zzaplogo.png"/>
  
  <!-- 내비게이션 -->
  <div id="persistent-nav">
  <button onclick="goTo('main-page-2nd')">메인 화면</button>
  <button onclick="goTo('guide')">조사 가이드</button>
  <button onclick="goTo('starting-point')">건물 입구로</button>
</div>
  
<!-- main-page 버튼 이미지 배치 -->
<div id="main-page" class="hidden" style="position: relative; height: 100vh; background-color: #f5f5f5;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" loading="lazy" onclick="goTo('starting-point')" alt="시작">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" loading="lazy" onclick="goTo('guide')" alt="가이드">
  <!-- Report -->
  <img src="report.png" class="menu-button report" loading="lazy" onclick="goTo('report')" alt="종료">
</div>
<style>
  .menu-button {
    position: absolute;
    cursor: pointer;
    transform-style: preserve-3d;
    transform: translateX(0) scale(1); /* 애니메이션 최종 위치 */
    transition: transform 0.4s ease;
    opacity: 0;
    pointer-events: none; /* 애니메이션 끝날 때까지 hover 방지 */
  }
  /* Initiation 버튼 */
  .initiation {
    top: 1%;
    left: 39%;
    width: 12%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.2s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }
  /* Guide 버튼 */
  .guide {
    top: 17%;
    right: 40%;
    width: 14%;
    height: auto;
    animation-name: slideInRight;
    animation-duration: 1.2s;
    animation-delay: 0.3s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* Report 버튼 */
  .report {
    top: 36%;
    left: 39%;
    width: 15%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.4s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* 등장 애니메이션 정의 */
  @keyframes slideInLeft {
    0% {
      transform: translateX(-80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }

  @keyframes slideInRight {
    0% {
      transform: translateX(80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }
/* 공통 Hover 발광 효과 */
.initiation:hover,
.guide:hover,
.report:hover {
  filter: drop-shadow(0 0 8px rgba(63, 64, 211, 0.6)); /* #3F40D3 계열 빛 */
  transition: filter 0.4s ease-in-out;
}

</style>

<!-- !!!!여기서부터 작동시킬 페이지들!!!! -->
  <!-- 로그인 화면 -->
  <div id="login-page">
    <p>ID를 입력하세요.</p>
    <input id="id-input" type="text" />
    <button onclick="checkLogin()">확인</button>
    <p id="login-error" style="color: #ff4444;"></p>
  </div>

    <!-- guide 페이지 -->
<div id="guide" class="hidden" style="padding: 3em; text-align: left; text-align: left; max-width: 700px; margin: 0 auto; background: white; border: 3px solid #3f40d3; border-radius: 10px; color: black;">
  <p><span style="font-weight: bold; color: #3f40d3;">조사 가이드</span><br><br><br>
    웹에서는 클릭, 모바일에서는 터치로 진행합니다. 자유롭게 종료하고 재실행하셔도 좋지만, 창을 닫거나 뒤로가기/새로고침할 시 진행 경과가 초기화되니 주의해 주세요.<br>
    본 조사는 별도의 서버를 사용하지 않기 때문에 세션을 종료하면 결과가 저장되지 않습니다.<br><br>
    메인 화면에서 '조사 종료→조사 마치기' 를 클릭하면 획득 코인을 알려 주는 화면이 표시됩니다. 최종 화면을 표시한 후에는 이전으로 돌아갈 수 없습니다.<br>
    최종 화면을 스크린 캡처하여 총괄계 DM으로 보내 주시면 조사 완료 처리됩니다.</p>
    <br>
    <button class="nav-button" onclick="goBack()">나가기</button>
</div>

  <!-- 레포트 주의사항 -->
  <div id="report" class="hidden">
    <p>모든 조사를 마치고 최종 리포트를 작성합니다. 진행할 시 이전 단계로 되돌아갈 수 없습니다.<br>조사를 마칠까요?</p>
    <button onclick="loadFinalReport()">조사를 마친다</button><br>
    <button class="nav-button" onclick="goBack()">취소</button>
  </div>
  
  <!-- 뒤로가기 적용된 메인 페이지 -->
<div id="main-page-2nd" class="hidden" style="position: relative; height: 100vh; background-color: #f5f5f5;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" onclick="goBack()" alt="시작">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" onclick="goTo('guide')" alt="가이드">
  <!-- Report -->
  <img src="report.png" class="menu-button report" onclick="goTo('report')" alt="종료">
  </div>
  
  <!-- 스타팅 포인트 -->  
  <div id="starting-point" class="hidden">
    <p><span style="font-weight: bold;">[건물 입구]</span><br><br>흰 관을 연상시키는 건물. 그 입구에 다다른다.<br>돌로 된 정문 표면에는 알 수 없는 문자가 빼곡히 음각으로 새겨져 있다.<br>건물 바깥은 이미 충분히 돌아보았으니 오늘은 새로 공개된 장소 위주로 탐색해 보자.</p>
    <button onclick="goTo('inside')">건물 안으로 들어간다</button>
  </div>

  <!-- 내부 1층 --> 
  <div id="inside" class="hidden">
    <p><span style="font-weight: bold;">[건물 1층]</span><br><br>대리석 바닥이 반짝거리는 건물 1층.<br>정면에 방문객을 맞이하는 <span style="color: #3f40d3;">로비</span>가 보이고, 로비 뒤편에는 뒤편에는 유리로 된 <span style="color: #3f40d3;">엘리베이터</span>가 배치되어 있어 시선이 저절로 천장을 향한다.<br>더 안쪽에 있는 복도는 <span style="color: #3f40d3;">레스토랑</span>으로 이어지는 듯하다.</p>
    <button onclick="goTo('lobby')">로비</button>
    <button onclick="goTo('elevator')">엘리베이터</button>
    <button onclick="goTo('restaurant')">레스토랑</button><br>
    <button class="nav-button" onclick="goTo('starting-point')">건물 입구로 돌아가기</button>
  </div>

      <!-- 로비:엘리베이터:탑승 --> 
    <div id="elevator" class="hidden">
    <p><span style="font-weight: bold;">[엘리베이터]</span><br><br>원하는 층으로 이동할 수 있다.<br>하지만 4층 이상부터는 정비 중인지, 버튼을 눌러도 불이 들어오지 않는다.</p>
    <button onclick="goToWithSound('inside','zzapelevator.mp3')">1층</button><br>
    <button onclick="goToWithSound('2ndfloor','zzapelevator.mp3')">2층</button><br>
    <button onclick="goToWithSound('3rdfloor','zzapelevator.mp3')">3층</button><br>
 </div>     
  
    <!-- 로비 --> 
    <div id="lobby" class="hidden">
    <p><span style="font-weight: bold;">[로비]</span><br><br>건물에 들어오면 가장 먼저 보게 되는 곳.<br>우아한 석조 <span style="color: #3f40d3;">카운터</span>를 중심으로 내빈을 위한 라운지가 마련되어 있다.</p>
    <button onclick="goTo('counter')">카운터</button>
    <button class="nav-button" onclick="goTo('inside')">나가기</button>
  </div>

    <!-- 로비:카운터 --> 
    <div id="counter" class="hidden">
    <p><span style="font-weight: bold;">[로비]<br>[카운터]</span><br><br>보통이라면 직원이 서 있어야 할 카운터 너머에는 아무도 없다. 가까이 다가가자 공증인의 목소리가 울린다.<br><br><em>"좋은 하루 보내고 계신가요?"</em><br><br><em>"이번에도 작은 퀴즈를 준비했습니다. 유언 집행을 위한 기력 충전에 도움이 되었으면 좋겠군요."</em></p>
    <button onclick="goTo('notary')">공증인과 대화하기</button><br>
    <button class="nav-button" onclick="goTo('lobby')">나가기</button>
 </div>
  
    <!-- 로비:카운터:notary --> 
    <div id="notary" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br>스피커를 통해 흘러나오는 목소리는 정중하지만, 마냥 신뢰할 수는 없다...<br><em>"어떤 일을 도와드릴까요?"</em></p>
    <button id="nota1" onclick="goTodel('notary1', 'nota1')">로렘의 유언에 대해서</button><br>
    <button id="nota2" onclick="goTodel('notary2', 'nota2')">기록체에 대해서</button><br>
    <button onclick="goTo('notary4')">퀴즈를 푼다</button><br>
    <button class="nav-button" onclick="goTo('counter')">대화를 끝낸다</button>
 </div>
  
    <!-- 로비:카운터:notary1 --> 
    <div id="notary1" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"로렘 님께서 작성하신 유언을 한 치의 오차 없이 낭독해 드렸습니다.<br>믿기 어려워하시는 유언집행자 분들이 많으신 듯해 유감입니다만...<br>그렇다고 유언을 집행하지 않을 수도 없는 노릇이지요."</em></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
    <!-- 로비:카운터:notary2 --> 
    <div id="notary2" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"기록체는 고인의 기억이나 성격을 기반으로 새로운 아웃풋을 도출하기도 합니다.<br>실로 놀라운 기술이지요. 여러분께 선보일 수 있어 영광입니다."</em></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
    <!-- 로비:카운터:notary3 --> 
    <div id="notary3" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"저는 로렘 님의 유언을 절차대로 집행하기 위해 만들어진 공증인 AI입니다. <br>이곳에 머무르시는 여러분의 편의를 위해 안내와 통번역을 포함한 다양한 역할도 함께 수행하고 있습니다. <br>섬 어디서든 말을 걸어 주시면 응답하겠습니다."</em></p>
    <button id="nota3-1" onclick="goTodel('notary3-1', 'nota3-1')">AI보다는 사람이 좋다고 항의한다</button>
    <button id="nota3-2" onclick="goTodel('notary3-2', 'nota3-2')">잘 부탁한다고 인사한다</button><br>
 </div>
  
    <!-- 로비:카운터:notary3-1 --> 
    <div id="notary3-1" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"그렇군요… 희망에 부응할 수 없어 유감입니다."</em><br><br>공증인은 풀이 죽은 것 같다.</p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
    <!-- 로비:카운터:notary3-2 --> 
    <div id="notary3-2" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"네, 잘 부탁드립니다. 초세계급 여러분의 편의를 위해 최선을 다하겠습니다."</em><br><br>공증인과 인사를 하자, 어느새 카운터 위에 반짝이는 코인이 하나 올라와 있다. 이건 선물일까?<br><span style="font-weight: bold;">1코인을 획득했다.</span></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
      <!-- 로비:카운터:notary4 --> 
    <div id="notary4" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"그럼 문제입니다. 미래기관 대출 순위 1위 도서의 제목을 알고 계신가요?"</em><br><br>정확한 제목을 입력하자.</p>
    <input type="text" id="secret-code-input">
    <div id="codebox">
    <button onclick="checkSecretCode()">확인</button>
  </div>
    <p id="secret-code-result"></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
      <!-- 로비:카운터:notary5 --> 
    <div id="notary5" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[카운터]<br>[공증인]</span><br><br><em>"정답입니다. 한 번 빌려 보시는 것은 어떤가요?"</em><br><br>짝짝짝, 박수 소리가 울리나 싶더니 어느새 카운터 위에 동전 두 개가 놓여 있다. 퀴즈를 맞힌 보상인 것 같다.<br><span style="font-weight: bold;">2코인을 획득했다.</span></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
    <!-- 레스토랑 --> 
    <div id="restaurant" class="hidden">
    <p><span style="font-weight: bold;">[레스토랑]</span><br><br>이곳에 모인 초세계급들의 식사를 책임지는 레스토랑. 식사를 하며 바깥 풍경을 바라볼 수 있도록 유리창이 나 있다.
    <br>전에 보았던 것과 크게 달라진 점은 없지만, <span style="color: #3f40d3;">"음료 디스펜서는 3층의 영화관으로 이전했습니다"</span> 라는 안내문이 붙어 있다.</p>
      <button class="nav-button" onclick="goTo('inside')">나가기</button>
  </div>

  <!-- 영화관 : 음료 디스펜서 --> 
  <div id="dispenser" class="hidden">
  <p><span style="font-weight: bold;">[레스토랑]/[음료 디스펜서]</span><br><br>
  커피나 차 등의 음료를 자유롭게 이용 가능한 디스펜서. 기본적인 음료는 물론, 여러 가지 맛의 원두와 티백, 시럽도 비치되어 있어 얼마든지 원하는 음료를 제조 가능할 것 같다.<br>
  한쪽에는 '랜덤 디스펜서 : 1일 3회 이용 가능' 이라고 적힌 검은 상자가 있는데... 여기서는 뭐가 나오는 걸까?<br>그 옆에는 '랜덤 음료 공모전' 이라고 적힌 투표함이 놓여 있다.</p>
  <button onclick="goTo('dispenser1')">음료를 뽑는다</button>
  <button onclick="goTo('dispenser2')">랜덤 음료 공모전</button><br>
  <button class="nav-button" onclick="goTo('restaurant')">나가기</button>
  </div>
  
  <!-- 영화관 : 음료 디스펜서 1 (음료를 뽑는다) -->
  <div id="dispenser1" class="hidden">
  <p><span style="font-weight: bold;">[레스토랑]/[음료 디스펜서]</span><br><br>
  원하는 음료를 가져가거나 랜덤 디스펜서를 이용해 보자. 랜덤 디스펜서는 1일 3회 사용 제한이 있는 것 같지만...</p>
  <button onclick="selectDrink('coffee')">커피</button>
  <button onclick="selectDrink('green-tea')">녹차</button>
  <button onclick="selectDrink('orange-juice')">오렌지 주스</button>
  <button onclick="selectRandomDrink()">랜덤</button>
  <p id="drink-result" style="margin-top: 2em; font-weight: bold;"></p>
  <button class="nav-button" onclick="goTo('dispenser')">나가기</button>
</div>

    <!-- 영화관 : 음료 디스펜서 2 (음료 공모전) -->
  <div id="dispenser2" class="hidden">
  <p><span style="font-weight: bold;">[레스토랑]/[음료 디스펜서]</span><br><br>
  "다음 주의 랜덤 음료 공모전 테마는... ＜좋아하는 사람의 마음을 사로잡기 위한 음료＞! 유언집행자 여러분의 많은 참여 바랍니다!"<br>라고 쓰여 있다. 한 사람당 2개까지 응모 가능한 모양이다.</p>
   <input type="text" id="gongmo">
  <div id="gongmobox" style="display: block; margin-top: 1em;">
  <button onclick="addgongmo()">확인</button>
  </div>
    <p id="gongmo-result"></p>
  <button class="nav-button" onclick="goTo('dispenser')">나가기</button>
</div>

    <!-- 2층 --> 
    <div id="2ndfloor" class="hidden">
    <p><span style="font-weight: bold;">[2층]</span><br><br>왼쪽 복도는 내빈용 객실로, 오른쪽 복도는 회의실로 이어진다.<br>2층은 이미 둘러보았으니 다른 층을 확인하자.</p>
    <button onclick="goTo('elevator1')">엘리베이터</button><br>
 </div>     
  


    <!-- 3층 --> 
    <div id="3rdfloor" class="hidden">
    <p><span style="font-weight: bold;">[3층]</span><br><br>굉장히 넓은 시설 어쩌고저쩌고</p>
    <button onclick="goTo('elevator1')">엘리베이터</button><br>
    <button onclick="goTo('music')">음악실</button>
    <button onclick="goTo('cinema')">영화관</button>
    <button onclick="goTo('art')">미술실</button><br>
    <button onclick="goTo('stage')">공연장</button>
    <button onclick="goTo('library')">도서관</button>
    <button onclick="goTo('lab')">자유연구실</button>
 </div>     

    <!-- 음악실 --> 
    <div id="music" class="hidden">
    <p><span style="font-weight: bold;">[음악실]</span><br><br>다양한 악기와 음반을 모아 둔 음악실.<br>방음 시설이 완비된 <span style="color: #3f40d3;">녹음 부스</span>와 <span style="color: #3f40d3;">CD 감상 부스</span>가 설치되어 있다.<br>또, <span style="color: #3f40d3;">악기 보관실</span>이라고 쓰인 작은 문이 구석에 배치된 것이 보인다.</p>
    <button onclick="goTo('suite')">녹음 부스</button>
    <button onclick="goTo('suite')">CD 감상 부스</button>
    <button onclick="goTo('suite')">악기 보관실</button>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
  </div>

    <!-- 영화관 --> 
    <div id="cinema" class="hidden">
    <p><span style="font-weight: bold;">[영화관]</span><br><br>소규모지만, 제법 영화관 분위기가 나는 <span style="color: #3f40d3;">스크린</span>과 관람용 <span style="color: #3f40d3;">좌석</span>이 설치된 공간이다.<br>한쪽에는 <span style="color: #3f40d3;">팝콘 기계</span>까지 설치되어 있고, 그 옆에는 예전에 레스토랑에 있었던 <span style="color: #3f40d3;">음료 디스펜서 v2.0</span>도 옮겨 와 있다. v2.0...?</p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

      <!-- 미술실 --> 
    <div id="art" class="hidden">
    <p><span style="font-weight: bold;">[미술실]</span><br><br></p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

      <!-- 공연장 --> 
    <div id="stage" class="hidden">
    <p><span style="font-weight: bold;">[공연장]</span><br><br></p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

      <!-- 도서관 --> 
    <div id="library" class="hidden">
    <p><span style="font-weight: bold;">[도서관]</span><br><br></p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

      <!-- 자유연구실 --> 
    <div id="lab" class="hidden">
    <p><span style="font-weight: bold;">[자유연구실]</span><br><br></p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

    <!-- 메모리얼 파크 --> 
    <div id="memorial" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크 입구]</span><br><br>흰 울타리로 둘러싸여 구획지어진 공간이 바다와 접하고 있다.<br>조금은 엄숙한 기분이 들지도...<br><br>
    <span style="color: #737373;">'메모리얼 파크에 입장한다' 버튼 클릭 시 효과음이 재생됩니다.</span></p>
    <button onclick="goToWithSoundNL('memorial1', 'zzapsea.mp3')">메모리얼 파크에 입장한다</button><br>
    <button class="nav-button" onclick="goTo('outside')">나가기</button>
  </div>

      <!-- 메모리얼 파크:1 --> 
    <div id="memorial1" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]</span><br><br>짧게 깎인 잔디 위로 새하얀 비석이 햇빛을 반사하며 눈길을 끈다.<br>이곳은 세상을 떠난 초세계급을 기리는 메모리얼 파크. 묻힌 사람은 아직 하나뿐이다.<br>규칙적으로 들려오는 파도 소리가 장송곡처럼 잔잔히 흐른다.<br>메모리얼 파크를 가로지르는 길은 꽃이 만발한 <span style="color: #3f40d3;">화원</span>으로 이어진다.</p>
    <button onclick="goTo('memorial-lorem')">로렘의 묘비</button>
    <button onclick="goTo('garden')">화원</button><br>
    <button class="nav-button" onclick="goToWithoutzzapsea('memorial')">나가기</button>
  </div>

      <!-- !!메모리얼 파크:화원 --> 
    <div id="garden" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]<br>[화원]</span><br><br>오색의 꽃이 화려하게 피어난 화원. 장미 덤불이 시야를 가릴 정도의 높이로 다듬어져 있어 마치 미로를 연상케 한다.<br>한켠에는 <span style="color: #3f40d3;">헌화용 꽃</span>을 자유롭게 가져갈 수 있는 공간이 있다. 하나 골라 보는 것도 좋겠지...<br>화원 안쪽에는 공중전화 박스를 닮은 작은 <span style="color: #3f40d3;">부스</span>가 설치되어 있다.</p>
    <button id="flowerpick" onclick="goTodel('gardenflower', 'flowerpick')">헌화용 꽃을 고른다</button>
    <button onclick="goTo('fltest0')">부스</button><br>
    <button class="nav-button" onclick="goTo('memorial1')">나가기</button>
  </div>

      <!-- !!메모리얼 파크:부스0 --> 
    <div id="fltest0" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>부스 안쪽으로 들어가 보면, 공중전화를 닮은 전화기가 놓여 있다. 정말 공중전화 박스였던 걸까?<br>하지만 전화기는 무척 구식이고, 숫자 버튼도 눌리지 않는다.<br>전화기 아래에 작게 안내문이 쓰여 있다.<br><br><em>'당신에게 맞는 꽃을 추천해 드립니다. 수화기를 들어 질문에 응답해 주세요.'</em></p>
    <button id="flt" onclick="goTodel('fltest1', 'flt')">수화기를 든다</button><br>
    <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>

      <!-- !!메모리얼 파크:부스1 --> 
    <div id="fltest1" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>수화기 저편에서 목소리가 들려온다. 질문에 답하면 되는 것 같은데...<br><br><em>"취향을 모르는 상대에게 선물을 줄 때에는, 내가 받는다면 기쁠 만한 것을 선물하나요?<br>아니면 호불호가 갈리지 않아 누구나 좋아할 만한 것을 선물하나요?"</em></p>
    <button onclick="goTo('fltest2')">내가 받는다면 기쁠 만한 것</button><br>
    <button onclick="goTo('fltest3')">호불호 없이 누구나 좋아할 만한 것</button><br>
  </div>

      <!-- !!메모리얼 파크:부스2 --> 
    <div id="fltest2" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br><em>"어떻게 해도 꺾을 수 없는 상대를 만난다면, 좋은 라이벌을 만나 기쁘다는 생각이 드나요?<br>아니면 솔직히 조금은 무력감을 느끼나요?"</em></p>
    <button onclick="goTo('fltest4')">기쁘다는 생각이 들 것 같다</button><br>
    <button onclick="goTo('fltest5')">조금은 무력감이 들 것 같다</button><br>
  </div>

        <!-- !!메모리얼 파크:부스3 --> 
    <div id="fltest3" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br><em>"새로 만나는 사람을 상대로는 먼저 자기소개를 하는 편인가요?<br>아니면 상대가 자기소개를 할 때까지 기다리나요?"</em></p>
    <button onclick="goTo('fltest4')">먼저 자기소개를 한다</button><br>
    <button onclick="goTo('fltest5')">상대가 자기소개를 할 때까지 기다린다</button><br>
  </div>

        <!-- !!메모리얼 파크:부스4 --> 
    <div id="fltest4" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br><em>"행운이 당신의 편에 있다고 믿나요?"</em></p>
    <button onclick="goTo('fltest6')">그렇다</button><br>
    <button onclick="goTo('fltest7')">아니다</button><br>
  </div>
  
        <!-- !!메모리얼 파크:부스5 --> 
    <div id="fltest5" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br><em>"이름도, 얼굴도 모르는 상대와 사랑에 빠질 수 있다고 생각하나요?"</em></p>
    <button onclick="goTo('fltest7')">그렇다</button><br>
    <button onclick="goTo('fltest8')">아니다</button><br>
  </div>

        <!-- !!메모리얼 파크:부스6 --> 
    <div id="fltest6" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>목소리가 끊기더니, 전화기 아래쪽에서 종이 한 장이 팔랑 떨어졌다. 꽃이 압화된 엽서 한 장이다.<br><br><em>'열정과 의지를 갖춘 당신에게 어울리는 꽃, 아데니움.<br>꽃말은 '무모한 사랑, 열정'.<br>과감한 결단이 필요할 때 이 꽃이 행운의 증표가 되어 줄 것입니다.'</em><br>...라는 글이 새겨져 있다.</p>
    <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>

          <!-- !!메모리얼 파크:부스7 --> 
    <div id="fltest7" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>목소리가 끊기더니, 전화기 아래쪽에서 종이 한 장이 팔랑 떨어졌다. 꽃이 압화된 엽서 한 장이다.<br><br><em>'성장의 여지와 잠재력을 품은 당신에게 어울리는 꽃, 능소화.<br>꽃말은 '기다림, 명예, 영광, 그리움'.<br>앞으로 한 발을 내딛고자 할 때 이 꽃이 행운의 증표가 되어 줄 것입니다.'</em><br>...라는 글이 새겨져 있다.</p>
    <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>

          <!-- !!메모리얼 파크:부스8 --> 
    <div id="fltest8" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>목소리가 끊기더니, 전화기 아래쪽에서 종이 한 장이 팔랑 떨어졌다. 꽃이 압화된 엽서 한 장이다.<br><br><em>'오묘한 매력을 가지고 있는 당신에게 어울리는 꽃, 거베라.<br>꽃말은 '풀 수 없는 수수께끼, 신비'.<br>진정한 자신을 내보이고 싶을 때 이 꽃이 행운의 증표가 되어 줄 것입니다.'</em><br>...라는 글이 새겨져 있다.</p>
    <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>

          <!-- !!메모리얼 파크:부스9 --> 
    <div id="fltest9" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]/[화원]<br>[부스]</span><br><br>목소리가 끊기더니, 전화기 아래쪽에서 종이 한 장이 팔랑 떨어졌다. 꽃이 압화된 엽서 한 장이다.<br><br><em>'신중하고 섬세한 당신에게 어울리는 꽃, 라벤더.<br>꽃말은 '침묵, 행복이 다시 온다'.<br>스스로에게 믿음이 필요할 때 이 꽃이 행운의 증표가 되어 줄 것입니다.'</em><br>...라는 글이 새겨져 있다.</p>
   <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>
  
      <!-- !!메모리얼 파크:화원:꽃 --> 
    <div id="gardenflower" class="hidden">
    <p><span style="font-weight: bold;">[화원]</span><br><br>마음에 드는 꽃을 고르자.</p>
    <button onclick="goTo('flowerobtain')">수국</button><br>
    <button onclick="goTo('flowerobtain')">장미</button><br>
    <button onclick="goTo('flowerobtain')">국화</button><br>
  </div>

      <!-- !!메모리얼 파크:화원:꽃 --> 
    <div id="flowerobtain" class="hidden">
    <p><span style="font-weight: bold;">[화원]</span><br><br>정성을 들여 꽃을 골랐다. 이 정도면 괜찮으려나...</p>
    <button class="nav-button" onclick="goTo('garden')">나가기</button>
  </div>

      <!-- !!메모리얼 파크:로렘의 묘비 --> 
    <div id="memorial-lorem" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]<br>[로렘의 묘비]</span><br><br>1985.06.09-2025.XX.XX</p>
    <button id="flowerbtn" onclick="giveflower('flowerbtn')">헌화한다</button><br>
    <button class="nav-button" onclick="goTo('memorial1')">나가기</button>
  </div>

      <!-- !!메모리얼 파크:로렘의 묘비:헌화 --> 
    <div id="flowerpage" class="hidden">
    <p><span style="font-weight: bold;">[메모리얼 파크]<br>[로렘의 묘비]</span><br><br>묘비 앞에 꽃을 가지런히 올려놓았다. 바람에 꽃잎이 살짝 흔들린다.<br>잠시 눈을 감았다 뜨니... 원래 여기 코인이 놓여 있었던가?<br><span style="font-weight: bold;">1코인을 획득했다.</span></p>
    <button class="nav-button" onclick="goTo('memorial1')">나가기</button>
  </div>

      <!-- 산책로 --> 
    <div id="street" class="hidden">
    <p><span style="font-weight: bold;">[산책로]</span><br><br>섬 뒤쪽을 돌아볼 수 있는 해안산책로. 왕복 30분 정도 소요된다는 안내가 적혀 있다.<br>산책로 입구에는 <span style="color: #3f40d3;">자전거 대여소</span>와 <span style="color: #3f40d3;">작은 벤치</span>가 보인다.</p>
    <button onclick="goTo('street1')">걸어서 산책하기</button><br>
    <button onclick="goTo('street2')">자전거 대여소</button>
    <button onclick="goTo('bench')">작은 벤치</button><br>
    <button class="nav-button" onclick="goTo('outside')">나가기</button>
  </div>

    <div id="street1" class="hidden">
    <p><span style="font-weight: bold;">[산책로]</span><br><br>천천히 걸어서 산책하기로 했다.</p>
  <button onclick="goTo('street2-2')">계속 걷는다</button>
  </div>
  
      <!-- 산책로-작은 벤치 --> 
    <div id="bench" class="hidden">
    <p><span style="font-weight: bold;">[산책로]<br>[작은 벤치]</span><br><br>바다를 향하는 쪽으로 놓인 벤치. 앉아서 쉬기에 딱 좋은 장소다.<br>
    수평선 끝까지 푸른색이 뻗어나간다. 시야를 가리는 것은 아무것도 없다.<br>
    이렇게 육지와 동떨어진 곳에 미래기관의 시설이 위치하고 있을 줄은 아무도 몰랐겠지...</p>
    <button class="nav-button" onclick="goTo('street')">나가기</button>
  </div>

      <!-- 산책로2:자전거 대여소 --> 
    <div id="street2" class="hidden">
    <p><span style="font-weight: bold;">[산책로]<br>[자전거 대여소]</span><br><br>바닷바람과 속도를 즐기고 싶은 사람들을 위한 자전거 대여소.<br>다양한 종류의 자전거가 마련되어 있다.<br>2인승 자전거, 전기 자전거… 외바퀴자전거까지?<br><br>이용료는 무료지만, 한 사용자당 1일 1회 사용 제한이 있는 모양이다.</p>
    <button id="bikerental" onclick="goTodel('street2-1', 'bikerental')">자전거를 대여한다</button><br>
    <button class="nav-button" onclick="goTo('street')">나가기</button>
  </div>

    <!-- 산책로:2-1 (자전거 대여) --> 
  <div id="street2-1" class="hidden"> <p><span style="font-weight: bold;">[산책로]<br>[자전거 대여소]</span><br><br>어떤 자전거를 빌릴까?</p> 
  <button onclick="goTo('street2-1-1')">평범한 자전거</button>
  <button onclick="goTo('street2-1-1')">전기 자전거</button>
  <button onclick="goTo('street2-1-2')">외바퀴 자전거</button>
  </div>

  <!-- 산책로:2-1-1 (일반 자전거) --> 
  <div id="street2-1-1" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]</span><br><br>빌린 자전거를 타고 달리자 딱 기분 좋은 바람이 불어온다. 상쾌한 느낌이다.<br>여기 있는 동안 기분 전환을 하고 싶다면 가끔 이렇게 달려보는 것도 좋겠지…</p>
  <button onclick="goTo('street2-2')">계속 달린다</button>
  </div>

  <!-- 산책로:2-1-2 (외바퀴 자전거) --> 
  <div id="street2-1-2" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]</span><br><br>기세 좋게 외바퀴 자전거를 고른 것은 좋았지만... 중심 잡기가 쉽지 않다!<br>몇 번 아슬아슬하게 넘어질 뻔한 뒤에야 익숙해졌다. 이거, 꽤 운동이 될 것 같은데...<br><br>적응하고 나니 뺨에 닿는 바람이 제법 상쾌하게 느껴진다.</p>
  <button onclick="goTo('street2-2')">계속 달린다</button>
  </div>
  
  <!-- 산책로:2-2 소원의 호수 입구 --> 
  <div id="street2-2" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]</span><br><br>어느새 산책로의 끝이다. 눈앞에 보이는 것은 작은 호수인데… 자세히 보니 <span style="color: #3f40d3;">소원의 호수</span>라고 적힌 팻말이 꽂혀 있다.</p>
  <button onclick="goTo('street3')">소원의 호수</button><br>
  <button class="nav-button" onclick="goTo('street')">이만 돌아간다</button>
  </div>

   <!-- 산책로: 3 소원의 호수 --> 
  <div id="street3" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>'간절히 바라는 마음은 형태를 가지게 된다는 말이 있습니다.<br>원하는 것을 소리내서 말하면, 호수에 걸린 마법이 당신의 소원을 이루어 줄지도...'</p>
  <button id="makeawish" onclick="goTodel('pond', 'makeawish')">소원을 빈다</button><br>
  <button class="nav-button" onclick="goTo('street2-2')">나가기</button>
  </div>

  <!-- 소원 빌기 --> 
  <div id="pond" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>어떤 소원을 빌까?</p>
  <button onclick="goTo('pond-money')">부자가 되고 싶다</button><br>
  <button onclick="goTo('pond-friend')">인기인이 되고 싶다</button><br>
  <button onclick="goTo('pond-nota')">공증인의 마음을 가지고 싶다</button><br>
  </div>

  <!-- 소원 빌기 --> 
  <div id="pond-money" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>"부자가 되고 싶다!"<br>소원을 빌었다...<br><br>어라? 아무것도 없던 하늘에서 갑자기 코인 두 개가 떨어졌다.<br>이 호수, 정말 효험이 있는 걸까...?<br><br><span style="font-weight: bold;">2코인을 획득했다.</span></p>
  <button class="nav-button" onclick="goTo('street3')">나가기</button>
  </div>

  <div id="pond-friend" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>"인기인이 되고 싶다!"<br>소원을 빌었다...<br><br>어라? 아무것도 없던 하늘에서 갑자기 종이 한 장이 떨어졌다. ...'소원권'?<br><br><span style="font-weight: bold;"> ‘소원권’ 을 획득했다. 선물할 시 상대의 호감도 +2. </span></p>
  <button class="nav-button" onclick="goTo('street3')">나가기</button>
  </div>

  <!-- 공증인 공략 -->
  <div id="pond-nota" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>"공증인의 마음을 가지고 싶다!"<br>소원을 빌었다...<br><br><em>"... ... 다른 소원은 없으신지요?"</em><br><br>당황한 기색이 역력한 공증인의 목소리가 들려온다. 듣고 있었던 건가...?</p>
  <button class="nav-button" onclick="goTo('pond1')">다시 소원 빌기</button>
  </div>
  
  <div id="pond1" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>어떤 소원을 빌까?</p>
  <button onclick="goTo('pond-money')">부자가 되고 싶다</button><br>
  <button onclick="goTo('pond-friend')">인기인이 되고 싶다</button><br>
  <button onclick="goTo('pond-nota1')">공증인의 마음을 가지고 싶다!!!</button><br>
  </div>

  <div id="pond-nota1" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>"공증인의 마음을 가지고 싶다!!!"<br>다시 한 번 소원을 빌었다...<br><br><em>"호의는 감사하지만, 저는 어디까지나 공증인 역할을 하는 AI이기 때문에..."</em><br><br>공증인은 곤란한 듯하다.</p>
  <button class="nav-button" onclick="goTo('pond2')">다시 소원 빌기</button>
  </div>

  <div id="pond2" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>어떤 소원을 빌까?</p>
  <button onclick="goTo('pond-money')">부자가 되고 싶다</button><br>
  <button onclick="goTo('pond-friend')">인기인이 되고 싶다</button><br>
  <button onclick="goTo('pond-nota2')">공증인의 마음을 가지고 싶다!!!!!!!!!!</button><br>
  </div>

  <div id="pond-nota2" class="hidden"> 
  <p><span style="font-weight: bold;">[산책로]<br>[소원의 호수]</span><br><br>"공증인의 마음을 가지고 싶다!!!!!!!!!!"<br>끈질기게 소원을 빌었다...<br><br><em>"마음은 기쁘지만, 그건 들어 드릴 수 없는 소원이라서... 대신 이거라도..."</em><br><br>공증인의 헛기침 소리와 함께 허공에서 코인 2개가 떨어졌다.<br><br><span style="font-weight: bold;">2코인을 획득했다.</span></p>
  <button class="nav-button" onclick="goTo('street3')">나가기</button>
  </div>
    
<!-- !!!!여기서부터 스크립트!!!! -->
  <script>
  // 애니메이션이 끝난 뒤 hover 작동 허용
  document.querySelectorAll('.menu-button').forEach(button => {
    button.addEventListener('animationend', () => {
      button.style.pointerEvents = 'auto';
    });
  });
//★★★★★[중요]유저 데이터★★★★★
    const userData = {
      mung0515: {
        class: "피자마스터 으믕",
        id: "ThePizzaMaster",
        STR: 6,
        INT: 6,
        OBS: 6,
        POW: 6,
        LUC: 6,
        key: 0,
        coin: 0
      },
      sese0409: {
        class: "감자마스터 세세",
        id: "Linguistics",
        STR: 1,
        INT: 1,
        OBS: 1,
        POW: 1,
        LUC: 1,
        key: 0,
        coin: 0
      },
        erne0409: {
        class: "재해과학자 에르네스토 프로켈",
        id: "NoClassToday",
        STR: 3,
        INT: 3,
        OBS: 3,
        POW: 3,
        LUC: 3,
        key: 0,
        coin: 0
      },
        liva3561: {
        class: "??? ?",
        id: "Untitled",
        STR: 3,
        INT: 3,
        OBS: 3,
        POW: 3,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
              taei0515: {
        class: "퇴마사 태이",
        id: "Taei",
        STR: 5,
        INT: 1,
        OBS: 1,
        POW: 3,
        LUC: 5,
        key: 0,
        coin: 0}
      ,
        pola2469: {
        class: "프론트맨 폴라리스 래피드",
        id: "polaris",
        STR: 5,
        INT: 4,
        OBS: 4,
        POW: 1,
        LUC: 5,
        key: 0,
        coin: 0}
      ,
        siny1538: {
        class: "약사 요시다 신",
        id: "SIN",
        STR: 2,
        INT: 5,
        OBS: 3,
        POW: 4,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        edit9947: {
        class: "과학수사관 에디트 발랑틴",
        id: "edit",
        STR: 4,
        INT: 4,
        OBS: 4,
        POW: 4,
        LUC: 4,
        key: 0,
        coin: 0}
      ,
        maur3085: {
        class: "소매치기 모리스 레비",
        id: "Levi",
        STR: 3,
        INT: 2,
        OBS: 4,
        POW: 2,
        LUC: 4,
        key: 0,
        coin: 0}
      ,
        jaha4287: {
        class: "스포츠 트레이너 원자한",
        id: "Jahan",
        STR: 4,
        INT: 4,
        OBS: 6,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        wied6391: {
        class: "필체감정사 비더 바이나흐텐",
        id: "WEIHNACHT",
        STR: 1,
        INT: 4,
        OBS: 6,
        POW: 1,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        isad2597: {
        class: "행정가 이사도르 도슨",
        id: "FT06_dawson",
        STR: 3,
        INT: 4,
        OBS: 5,
        POW: 6,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
        zede0753: {
        class: "생존전문가 제더카이어 어비스",
        id: "AtoZ",
        STR: 5,
        INT: 3,
        OBS: 5,
        POW: 5,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
        akir2740: {
        class: "화가 에이즈카 아키라",
        id: "akila",
        STR: 1,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 4,
        key: 0,
        coin: 0},
              rust8164: {
        class: "우체부 루스티카 테일윈드",
        id: "RUSTIC4",
        STR: 4,
        INT: 1,
        OBS: 4,
        POW: 3,
        LUC: 5,
        key: 0,
        coin: 0},
              seto2566: {
        class: "피아니스트 세토 아이비",
        id: "IVY",
        STR: 3,
        INT: 4,
        OBS: 5,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0},
              kuki4917: {
        class: "해커 쿠루미 J. 쿠로키",
        id: "MACHO_KUKI",
        STR: 3,
        INT: 5,
        OBS: 4,
        POW: 3,
        LUC: 1,
        key: 0,
        coin: 0},
              nuri2925: {
        class: "체스마스터 하누리",
        id: "nuriNOW",
        STR: 1,
        INT: 4,
        OBS: 3,
        POW: 5,
        LUC: 4,
        key: 0,
        coin: 0},
              rose1928: {
        class: "수영선수 미아 콜린스",
        id: "RosePinkDolphin",
        STR: 4,
        INT: 2,
        OBS: 5,
        POW: 4,
        LUC: 3,
        key: 0,
        coin: 0},
              ivan2992: {
        class: "수의사 이반 카르포프",
        id: "ivan",
        STR: 4,
        INT: 5,
        OBS: 5,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0},
              bury5792: {
        class: "고고학자 베리",
        id: "Berry",
        STR: 5,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 5,
        key: 0,
        coin: 0},
                 fome0838: {
        class: "탐험가 포멜하우트 에빌라",
        id: "Explorer",
        STR: 5,
        INT: 3,
        OBS: 3,
        POW: 5,
        LUC: 2,
        key: 0,
        coin: 0} 
    };

    let currentUser = null;
    let pageHistory = [];
    const outputIds = ['gym-result', 'library-result'];
    
//★★★★★로그인★★★★★
    function checkLogin() {
      const id = document.getElementById('id-input').value;
      if (userData[id]) {
        currentUser = userData[id];
        showWelcomeMessage(currentUser.class);
      } else {
        document.getElementById('login-error').innerText = "아이디가 일치하지 않습니다.";
      }
    }
  
//★★★★★환영 메시지★★★★★
    function showWelcomeMessage(userClass) {
      document.getElementById('login-page').classList.add('hidden');
      const container = document.createElement('div');
      container.classList.add('typewriter');
      container.innerHTML = `초세계급 ${userClass} 님을 환영합니다. . .`;
      document.body.appendChild(container);
      setTimeout(() => {
        container.remove();
        showUserInfo();
        document.getElementById('main-page').classList.remove('hidden');
        pageHistory.push('main-page');
      }, 3600);
    }
//★★★★★유저 인포메이션 창★★★★★
    function showUserInfo() {
      const userBox = document.getElementById('user-display');
      document.getElementById('user-class-line').innerHTML = `User ID: ${currentUser.id}`;
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
      userBox.classList.remove('hidden');
    }
    function updateCoinDisplay() {
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
    }
//★★★★★출력된 텍스트 아웃풋 창 넘어갈 때 지우기 (goTo 연동용)★★★★★
    function clearOutputs() {
      outputIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerText = '';
      });
    }

//★★★★★goTo★★★★★
function goTo(page) {
  // 창 이동시 숨겨지지 않는 디스플레이 설정
  const exceptions = ['user-display','persistent-nav','bgm-player','bgm-player button'];  
  document.querySelectorAll('div').forEach(div => {
    const isException = exceptions.includes(div.id) || div.closest('#user-display') || div.closest('#persistent-nav');
    if (!isException) {
      div.classList.add('hidden');
    }
  });
  //지우고 페이드 인
  const target = document.getElementById(page);
  target.classList.remove('hidden');
  target.classList.add('fade-in');
  clearOutputs();
  pageHistory.push(page);
  //[중요]특정 페이지 진입 시 스탯(코인 등)변동
  if (['notary3-2','flowerpage','sofa1-1','sofa1-3','feed2'].includes(page)) {
    currentUser.coin = (currentUser.coin || 0) + 1;
    updateCoinDisplay();
  }
  if (['notary5','pond-money','pond-nota2'].includes(page)) {
    currentUser.coin = (currentUser.coin || 0) + 2;
    updateCoinDisplay();
  }
  if (['flowerobtain'].includes(page)) {
    currentUser.key = 1;
    updateCoinDisplay();
  }
    if (['street2-1-2'].includes(page)) {
    currentUser.unicycle = true;
    updateCoinDisplay();
  }
    if (['pond-nota2'].includes(page)) {
    currentUser.notalove = true;
    updateCoinDisplay();
  }
      if (['pond-friend'].includes(page)) {
    currentUser.wishticket = true;
    updateCoinDisplay();
  }
        if (['drawer1'].includes(page)) {
    currentUser.bread = 1;
    updateCoinDisplay();
  }
          if (['fltest6'].includes(page)) {
    currentUser.post = "아데니움이";
    updateCoinDisplay();
  }
          if (['fltest7'].includes(page)) {
    currentUser.post = "능소화가";
    updateCoinDisplay();
  }
          if (['fltest8'].includes(page)) {
    currentUser.post = "거베라가";
    updateCoinDisplay();
  }
          if (['fltest9'].includes(page)) {
    currentUser.post = "라벤더가";
    updateCoinDisplay();
  }
    if (page === 'starting-point') {
    document.getElementById('persistent-nav').style.display = 'flex';
  }
  //얘네는 버튼 없애기용인데 이렇게 하지 말고 goTodel 사용을 고려할 것 ...
  const flowerButton = document.getElementById('flower-button-box');
if (flowerButton) {
  // 한 번이라도 헌화한 경우에는 다시 보이지 않음
  flowerButton.style.display = (page === 'flowerpage') ? 'none' : 'block';
}
  const codebox = document.getElementById('codebox');
if (page === 'notary4' && codebox) {
  const alreadyUsed = codebox.getAttribute('data-used') === 'true';
  codebox.style.display = alreadyUsed ? 'none' : 'block';
}
  document.getElementById('user-display').classList.remove('hidden');
}

//★★★★★goTodel(이동과 동시에 버튼 삭제)★★★★★   
function goTodel(targetPage, buttonId) {
  const btn = document.getElementById(buttonId);
  if (btn) btn.remove(); // 한 번만 지움
  goTo(targetPage); // 기존 페이지 이동 로직 재사용
}

//★★★★★goToWithSound(페이지 이동 버튼 누를 때 효과음(일시) 재생)★★★★★   
  function goToWithSound(page, soundFile) {
      const audio = new Audio(soundFile);
      audio.loop = false;
      audio.volume = 0.3;
      audio.play();
      goTo(page);
    }

//★★★★★goToWithSound(페이지 이동 버튼 누를 때 효과음 계속해서 재생, 루프)★★★★★  
let zzapseaAudio = null;
let zzapportAudio = null;

function goToWithSoundNL(page, soundFile) {
  if (soundFile.includes('zzapsea.mp3')) {
    zzapseaAudio = new Audio(soundFile);
    zzapseaAudio.loop = true;
    zzapseaAudio.play();
  } else if (soundFile.includes('zzapport.mp3')) {
    zzapportAudio = new Audio(soundFile);
    zzapportAudio.loop = true;
    zzapportAudio.play();
  } else {
    const audio = new Audio(soundFile);
    audio.loop = true;
    audio.play();
  }
  goTo(page);
}

//★★★★★해당 버튼을 누를 시, 페이지 이동과 동시에 zzapseaAudio 중지★★★★★
function goToWithoutzzapsea(page) {
  if (zzapseaAudio && !zzapseaAudio.paused) {
    zzapseaAudio.pause();
    zzapseaAudio.currentTime = 0;
  }
  if (zzapportAudio && !zzapportAudio.paused) {
    zzapportAudio.pause();
    zzapportAudio.currentTime = 0;
  }
  goTo(page);
}

//★★★★★goBack★★★★★  
function goBack() {
  if (pageHistory.length > 1) {
    // 현재 페이지 제거
    pageHistory.pop();
    const prevPage = pageHistory[pageHistory.length - 1];

    // 예외 요소들 (루트 + 내부 포함 전부 보호)
    const persistentRoots = ['user-display', 'bgm-player', 'persistent-nav'];

    // 모든 div를 숨기되, 예외 요소 또는 그 자식은 숨기지 않음
    document.querySelectorAll('div').forEach(div => {
      const isPersistent = persistentRoots.some(rootId => {
        const rootEl = document.getElementById(rootId);
        return rootEl && (div === rootEl || rootEl.contains(div));
      });
      if (!isPersistent) {
        div.classList.add('hidden');
      }
    });

    // 이전 페이지 보여주기
    const target = document.getElementById(prevPage);
    if (target) {
      target.classList.remove('hidden');
      target.classList.add('fade-in');
    }

    // 텍스트 강제 갱신 (혹시라도 브라우저 캐시가 날려버린 경우)
    if (currentUser) {
      const idLine = document.getElementById('user-class-line');
      const coinLine = document.getElementById('coin-line');
      if (idLine) idLine.innerText = `User ID: ${currentUser.id}`;
      if (coinLine) coinLine.innerText = `Coin: ${currentUser.coin || 0}`;
    }

    // 출력 영역 초기화
    clearOutputs();
  }
}




//여기서부터 특정 장소에서 사용하도록 되어 있는 함수!!!!
//★★★★★헌화★★★★★
function giveflower(buttonId) {
  if (currentUser.key === 1) {
    // 버튼 제거
    const btn = document.getElementById(buttonId);
    if (btn) btn.remove();  // 단 한 번만 제거
    goTo('flowerpage');
  } else {
    alert("꽃을 가지고 있지 않다. 어디서 구할 수 있을까...");
  }
}
//★★★★★냉장고★★★★★
function openfridge(buttonId) {
  if (currentUser.STR >= 4) {
    goTo('fridge1');
  } else {
    const result = document.getElementById('fridge-result');
    result.innerText = "열심히 문을 당겨 봤지만... 꿈쩍도 하지 않는다. 힘이 부족해...!";
  }
}
//★★★★★토스트★★★★★
function maketoast(buttonId) {
  if (currentUser.bread === 1) {
    // 버튼 제거
    const btn = document.getElementById(buttonId);
    if (btn) btn.remove();  // 단 한 번만 제거
    goTo('toaster');
  } else {
    alert("식빵을 가지고 있지 않다. 어디 있으려나?");
  }
}
//★★★★★토스트 굽기★★★★★
function toasttime(buttonId) {
  if (currentUser.LUC <= 2) {
    goTo('overcook');
  } else if (currentUser.LUC >= 4) {
    goTo('perfect');
  } else {
    goTo('undercook');
  }
}
//★★★★★갈매기 밥★★★★★
function feedgalmaegi(buttonId) {
  if (currentUser.POW <= 2) {
    goTo('feed1');
  } else if (currentUser.POW >= 4) {
    goTo('feed2');
  } else {
    goTo('feed3');
  }
}
//★★★★★탐조★★★★★
function watchbird(buttonId) {
  if (currentUser.OBS <= 2) {
    goTo('sand2');
  } else if (currentUser.OBS >= 4) {
    goTo('sand3');
  } else {
    goTo('sand4');
  }
}
//★★★★★퀴즈★★★★★
function checkSecretCode() {
  const input = document.getElementById('secret-code-input').value;
  if (input === "19850609") { // 원하는 정답
    const codebox = document.getElementById('codebox');
    if (codebox) {
      codebox.style.display = 'none';
      codebox.setAttribute('data-used', 'true');  // ✅ 한 번 사용했음을 표시
    }
    goTo('notary5');
  } else {
    const result = document.getElementById('secret-code-result');
    result.innerText = "공증인은 침묵하고 있다... 아무래도 이게 정답이 아닌 것 같다.";
  }
}    


//★★★★★음료 디스펜서★★★★★
// 음료 효과음 공통
let drinkAudio = new Audio("zzapdrink.mp3");
function playDrinkSound() {
  drinkAudio.pause();
  drinkAudio.currentTime = 0;
  drinkAudio.play();
}
// 일반 음료 선택 함수
function selectDrink(type) {
  const messages = {
    coffee: { title: "커피", desc: "원두의 고소한 향을 살린 커피. 은은하게 남는 잔향이 매력적이다." },
    "green-tea": { title: "녹차", desc: "시원하게 얼음을 띄운 녹차." },
    "orange-juice": { title: "오렌지 주스", desc: "상큼한 오렌지 주스. 더위를 싹 날려 주는 맛이다." }
  };
  const msg = messages[type];
  const resultBox = document.getElementById("drink-result");
  resultBox.innerHTML = `<p><span style="font-weight: bold;">[${msg.title}]</span><br><br>${msg.desc}</p>`;
  // 애니메이션 적용
  resultBox.style.animation = "none";
  void resultBox.offsetWidth;
  resultBox.style.animation = "pop 0.6s ease-out";
  playDrinkSound();
}
//랜덤 음료
let randomClickCount = 0;
const randomLimit = 3;
function selectRandomDrink() {
  if (randomClickCount >= randomLimit) {
    document.getElementById("drink-result").innerText = "오늘의 사용 횟수를 초과한 모양이다.";
    return;
  }
  const messages = [
    { title: "간장 콜라", desc: "추천인 : 제더카이어 어비스" },
    { title: "유니콘 프라페", desc: "추천인 : 미아 콜린스" },
    { title: "된장국", desc: "추천인 : 미아 콜린스" },
    { title: "괴상한 음료에 지친 당신을 치료해 줄 비타500", desc: "추천인 : 요시다 신" },
    { title: "목넘김이 깔끔한 생수", desc: "추천인 : 요시다 신" },
    { title: "탄산팥죽", desc: "추천인 : 스트로 베리" },
    { title: "밴드 딥 블루가 그려진 캔커피", desc: "추천인 : 스트로 베리" },
    { title: "위스키", desc: "추천인 : 이반 카르포프" },
    { title: "보드카", desc: "추천인 : 이반 카르포프" },
    { title: "누리표 누리자 에너지음료", desc: "추천인 : 하누리" },
    { title: "누리표 복수의 붉은맛(※딸기맛)", desc: "추천인 : 하누리" },
    { title: "팥맛 소다", desc: "추천인 : 폴라리스 래피드" },
    { title: "두리안 주스", desc: "추천인 : 폴라리스 래피드" },
    { title: "코코아", desc: "추천인 : 루스티카 테일윈드" },
    { title: "딸기라떼", desc: "추천인 : 루스티카 테일윈드" },
    { title: "아이스 위스키 커피", desc: "추천인 : 포멜하우트 에빌라" },
    { title: "코코넛 간장 스무디", desc: "추천인 : 포멜하우트 에빌라" },
    { title: "딸기잼", desc: "추천인 : ?" },
    { title: "테트로도톡신 10mg", desc: "추천인 : 에디트 발랑틴" },
    { title: "물 6L", desc: "추천인 : 에디트 발랑틴" },
    { title: "아샷추", desc: "추천인 : 이사도르 도슨" },
    { title: "바닷물", desc: "추천인 : 에르네스토 프로켈" },
    { title: "마그마 라떼", desc: "추천인 : 에르네스토 프로켈" },
    { title: "팥절미 라떼", desc: "추천인 : 태이" }
  ];
  const randomIndex = Math.floor(Math.random() * messages.length);
  const msg = messages[randomIndex];
  const resultBox = document.getElementById("drink-result");
  resultBox.innerHTML = `<p><span style="font-weight: bold;">[${msg.title}]</span><br><br>${msg.desc}</p>`;
  // 애니메이션 재적용
  resultBox.style.animation = "none";
  void resultBox.offsetWidth;
  resultBox.style.animation = "pop 0.6s ease-out";
  playDrinkSound();
  // 클릭 횟수 증가
  randomClickCount++;
  if (randomClickCount >= randomLimit) {
    document.getElementById("random-button").disabled = true;
    document.getElementById("random-button").innerText = "사용 불가";
  }
}

//랜덤음료공모전
function addgongmo() {
  const input = document.getElementById('gongmo').value.trim();
  // currentUser.gongmo가 없다면 초기화
  if (!currentUser.gongmo) {
    currentUser.gongmo = [];
  }
  // 2번 이상 제출 시 제한
  if (currentUser.gongmo.length >= 2) {
    alert("이미 공모전에 음료를 제출했습니다!");
    return;
  }
  if (input === "") {
    alert("음료 이름을 입력해 주세요.");
    return;
  }
  // 제출 처리
  currentUser.gongmo.push(input);
  document.getElementById('gongmo-result').innerText = "공모전에 음료를 제출했습니다.";
  document.getElementById('gongmo').value = "";
}

  </script>
<script src="final-report.js"></script>
</body>
</html>
